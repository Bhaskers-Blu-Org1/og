= Object Generator
v{display-version}, April 6th, 2015
:toc: right
:sectlinks:
:sectanchors:
:numbered:

== Introduction
Object Generator (OG) is an HTTP object storage performance test tool.

== Installation

=== Minimum Requirements
|===
|Component|Configuration

|CPU
|Dual Core

|Memory
|4GB system; 2GB available

|Free space
|10GB

|Operating System
|Modern Linux OS*

|Java Version
|Java 7
|===

NOTE: OG has been tested on Ubuntu 14.04, but any modern linux OS should work.

=== Distribution
OG is distributed as a _tar.gz_ archive. To install, simply unpack the archive
in a directory of your choosing.

[source, bash, subs="attributes"]
----
~$ tar -zxf og-{display-version}.tar.gz
----

== Project Layout
The OG distribution is comprised of several files and directories:

[source, bash, subs="attributes"]
----
~$ tree
├── conf
│   ├── object-file-log4j2.xml
│   ├── og-log4j2.xml
│   └── sample
│       ├── authentication-basic.json
│       ├── concurrency-ops-with-rampup.json
│       ├── concurrency-threads.json
│       ├── filesize-distributions.json
│       ├── host-multiple.json
│       ├── io-mix.json
│       ├── simple.json
│       ├── simple-s3.json
│       └── stopping-conditions-operations.json
├── docs
│   └── userguide.html
├── lib
│   └── ...snip...
├── log
├── object
├── object-file # <2>
└── og # <1>
----
<1> primary cli shell script
<2> auxillary script for manipulating og object files

== Configuration
OG is configured by a single json config file. See <<Configuration Reference>>
for more details.

== Results
For each OG test that is run, a timestamped test results directory is created.
An example:

[source, bash, subs="attributes"]
----
~$ tree log/
log/
└── 2015-06-17_23.56.32 # <1>
    ├── gc.log # <2>
    ├── og.json # <3>
    ├── og.log # <4>
    ├── request.log # <5>
    └── summary.json # <6>
----
<1> parent directory for a test run
<2> jvm gc.log for this test
<3> serialized og.json, including default values; useful for config auditing
<4> applicationg logs
<5> per-request log, including http details
<6> summary statistics

== Appendix

=== Configuration Reference

==== General Configuration
|===
|Parameter|Type|Default

|scheme
|Enum ("http", "https")
|"http"

|host
|String or SelectionConfig<String>
|None; see <<Selection Configuration>>

|port
|Integer
|None

|api
|Enum ("soh", "s3", "openstack", "webdav")
|"soh"

|uri_root
|String
|"/<api>/"

|container
|String or ContainerConfig
|None; see <<Container Configuration>>

|headers
|Object
|{}

|write
|Decimal or OperationConfig
|100.0; see <<Operation Configuration>>

|read
|Decimal or OperationConfig
|0.0; see <<Operation Configuration>>

|delete
|Decimal or OperationConfig
|0.0; see <<Operation Configuration>>

|filesize
|Decimal or SelectionConfig<FilesizeConfig>
|see <<Filesize Configuration>>

|data
|Enum ("random", "zeroes")
|"random"

|concurrency
|ConcurrencyConfig
|see <<Concurrency Configuration>>

|authentication
|AuthenticationConfig
|see <<Authentication Configuration>>

|client
|ClientConfig
|see <<Client Configuration>>

|stopping_conditions
|StoppingConditionsConfig
|see <<Stopping Conditions Configuration>>

|object_manager
|ObjectManagerConfig
|see <<Object Manager Configuration>>
|===

==== Operation Configuration
|===
|Parameter|Type|Default

|host_selection
|Enum ("random", "roundrobin")
|"roundrobin"

|host
|String or [HostConfig]
|None

|object
|ObjectConfig
|see <<Object Configuration>>

|headers
|Object
|{}

|weight
|Decimal
|1.0
|===

==== Object Configuration
|===
|Parameter|Type|Default

|prefix
|String
|""

|selection
|Enum ("random", "roundrobin")
|"random"

|min_suffix
|Integer
|0

|max_suffix
|Integer
|9223372036854775807
|===

==== Filesize Configuration
|===
|Parameter|Type|Default

|distribution
|Enum ("uniform", "normal", "lognormal")
|"uniform"

|average
|Decimal
|5.0

|average_unit
|Enum (see <<Filesize Units>>)
|"mebibytes"

|spread
|Decimal
|0.0

|spread_unit
|Enum (see <<Filesize Units>>)
|"mebibytes"

|weight
|Decimal
1.0
|===

==== Concurrency Configuration
|===
|Parameter|Type|Default

|type
|Enum ("threads", "ops")
|"threads"

|count
|Decimal
|1.0

|unit
|Enum (see <<Time Units>>)
|"seconds"

|rampup
|Decimal
|0.0

|rampup_unit
|Enum (see <<Time Units>>)
|"seconds"
|===

==== Authentication Configuration
|===
|Parameter|Type|Default

|type
|Enum ("basic", "awsv2", "awsv4")
|"basic"

|username
|String
|None

|password
|String
|None
|===

==== Client Configuration
|===
|Parameter|Type|Default

|connect_timeout
|Integer
|0

|so_timeout
|Integer
|0

|so_reuse_address
|Boolean
|false

|so_linger
|Integer
|-1

|so_keep_alive
|Boolean
|true

|tcp_no_delay
|Boolean
|true

|persistent_connections
|Boolean
|true

|chunked_encoding
|Boolean
|false

|expect_continue
|Boolean
|false

|wait_for_continue
|Integer
|3000

|retry_count
|Integer
|0

|request_sent_retry
|Boolean
|true

|write_throughput
|Integer
|0

|read_throughput
|Integer
|0
|===

==== Stopping Conditions Configuration
|===
|Parameter|Type|Default

|operations
|Integer
|0

|runtime
|Decimal
|0.0

|runtime_unit
|Enum (see <<Time Units>>)
|"seconds"

|concurrent_requests
|Integer
|2000

|status_codes
|Object
|{}
|===

==== Object Manager Configuration
|===
|Parameter|Type|Default

|object_file_location
|String
|"./object"

|object_file_name
|String
|"<container>-<api>"
|===

==== Selection Configuration
|===
|Parameter|Type|Default

|selection
|Enum ("random", "roundrobin")
|"random"

|choices
|List<ChoiceConfig>; see <<Choice Configuration>>
|[]
|===

==== Choice Configuration
|===
|Parameter|Type|Default

|choice
|T
|None

|weight
|Decimal
|1.0
|===

=== Filesize Units
|===
|Input|Unit

|"b", "byte", "bytes"
|bytes

|"kb", "kilobyte", "kilobytes"
|kilobytes

|"kib", "kibibyte", "kibibytes"
|kibibytes

|"mb", "megabyte", "megabytes"
|megabytes

|"mib", "mebibyte", "mebibytes"
|mebibytes

|"gb", "gigabyte", "gigabytes"
|gigabytes

|"gib", "gibibyte", "gibibytes"
|gibibytes

|"tb", "terabyte", "terabytes"
|terabytes

|"tib", "tebibyte", "tebibytes"
|tebibytes

|"pb", "petabyte", "petabytes"
|petabytes

|"pib", "pebibyte", "pebibytes"
|pebibytes
|===

=== Time Units
|===
|Input|Unit

|"ns", "nano", "nanosec", "nanosecs", "nanosecond", "nanoseconds"
|nanoseconds

|"micro", "micros", "microsec", "microsecs", "microsecond", "microseconds"
|microseconds

|"ms", "milli", "millis", "millisec", "millisecs", "millisecond", "milliseconds"
|milliseconds

|"s", "sec", "secs", "second", "seconds"
|seconds

|"m", "min", "mins", "minute", "minutes"
|minutes

|"h", "hr", "hrs", "hour", "hours"
|hours

|"d", "day", "days"
|days
|===
